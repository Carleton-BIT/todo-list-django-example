<!DOCTYPE html>
{% load static %}

<html>
<head>
    <title>To-Do List</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <h1>To-Do List</h1>
    <ul>
    {% for task in tasks %}
        <li>
            {% if task.completed %}
            ☑
            {% endif %}
            {% if not task.completed %}
            ☐
            {% endif %}
            {{ task.description | safe }}
            - <a href="{% url 'toggle_task' task.id %}">Toggle</a>
            - <a href="{% url 'delete_task' task.id %}">Delete</a>
        </li>
    {% endfor %}
    </ul>
<h2>Add New Task</h2>
<form action="{% url 'add_task' %}" method="post" onsubmit="return validateForm()">
    {% csrf_token %}
    <input type="text" name="description" id="id_description" required><br>
    <button type="submit">Add Task</button>
</form>

<script>
    function validateForm() {
        const descriptionField = document.getElementById('id_description');
        const descriptionValue = descriptionField.value;
        const pattern = /^[a-zA-Z0-9\s]*$/; // Allow only alphanumeric characters and spaces

        if (!pattern.test(descriptionValue)) {
            alert("Please enter a valid description without emojis or special characters.");
            return false;
        }

        return true;
    }
</script>

<hr>
    <footer>Hey there, you are using {{ browser }}</footer>
</body>
</html>
